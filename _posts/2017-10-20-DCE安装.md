---
layout: post
title: "DCE安装"
description: "shell"
tags: [Daocloud]
share: false
---

## 基本步骤  
1. 安装配置NTP服务  
2. 安装Docker  
3. 安装DCE组件  
  
## 2.6安装  
### 在线  
{% highlight shell %}
#install docker
sudo yum install -y yum-utils  
sudo yum-config-manager --add-repo https://download.daocloud.io/docker/linux/centos/docker-ce.repo  
sudo yum install -y -q --setopt=obsoletes=0 docker-ce-17.03.1.ce*  
sudo systemctl enable docker  
sudo systemctl start docker  
setenforce 0 && sed -i '/^SELINUX=/c\SELINUX=disabled' /etc/selinux/config  
systemctl stop firewalld  
systemctl disable firewalld.service  
service docker restart  
#install dce  
bash -c "$(docker run --rm daocloud.io/daocloud/dce install)"  
{% endhighlight %}
### 离线  
{% highlight shell %}
#install docker  
tar -zxvf docker-offline-17.03.1-ce-centos7.2.tar.gz  
cd docker-offline-17.03.1-ce-centos7.2  
chmod +x install.sh  
bash install.sh  
#配置 Docker
chkconfig docker on  
setenforce 0 && sed -i '/^SELINUX=/c\SELINUX=disabled' /etc/selinux/config  
systemctl stop firewalld  
systemctl disable firewalld.service  
service docker restart  
#install dce  
gzip -dc dce.tar.gz | docker load  
bash -c "$(docker run --rm daocloud.io/daocloud/dce install)"  
{% endhighlight %}  
## 2.8安装  
### 在线  
{% highlight shell %}
export VERSION=2.8.0 #可以修改为指定的版本  
curl -L https://qiniu-download-public.daocloud.io/DaoCloud_Enterprise/$VERSION/dce-installer  > /usr/local/bin/dce-installer  
chmod +x /usr/local/bin/dce-installer  
dce-installer  
dce-installer prepare-docker -q  
bash -c "$(docker run --rm daocloud.io/daocloud/dce:$VERSION install)"  
{% endhighlight %}  
### 离线  
{% highlight shell %}
tar -xvf dce-2.8.0.tar  
cd dce-2.8.0  
ls  
#dce-installer  dce-installer-registry.tar  README.md  registry  repo
./dce-installer prepare-docker  
./dce-installer up-installer-registry --image-path=/path/to/dce-installer-registry.tar  
bash -c "$(docker run -i --rm -e HUB_PREFIX=<this-machine-ip>:15000/daocloud <this-machine-ip>:15000/daocloud/dce:2.8.0 install)"  
{% endhighlight %}  
